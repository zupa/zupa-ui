/*! zupa-ui 2014-11-30 */
!function(a){a.zupaAccordion=function(b,c){var d={active:0,panes:null},e=this;e.settings={};var f=a(b),g=f.find("> div");e.init=function(){e.settings=a.extend(!0,{},d,c),f.addClass("gui-accordion"),a.each(e.settings.panes,function(a,b){var c=g.eq(a);c.addClass("accord"),c.wrapInner('<div class="contentpane">'),c.append("</div>"),c.prepend('<div class="titlebutton">'+b.title+"</div>"),e.settings.active!=a?c.find(".contentpane").hide():c.addClass("active")}),g.find(".titlebutton").click(function(){var b=a(this).parent().index();e.setActive(b)}),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&e.drawSize()}),e.drawSize()},e.drawSize=function(){var a=f.height(),b=f.find(".accord:first .titlebutton").height()+1,c=g.length*b,d=a-c-4,e=f.find(".active .contentpane");e.height(d).show(),e.trigger("sizeHasChanged")},e.setActive=function(b){if(b==e.settings.active)return!1;var c=g.eq(e.settings.active),d=c.find(".contentpane").height();g.eq(b).find(".contentpane").show(),c.find(".contentpane").css("margin-top","-5px"),c.removeClass("active"),c.find(".contentpane").animate({height:"0px"},200,function(){a(this).css("margin-top","0px").hide()}),e.settings.active=b,g.eq(b).find(".contentpane").animate({height:d+"px"},200,function(){g.eq(b).addClass("active"),g.eq(b).find(".contentpane").trigger("sizeHasChanged")})},e.init()},a.fn.zupaAccordion=function(b){return this.each(function(){if(void 0==a(this).data("zupaAccordion")){var c=new a.zupaAccordion(this,b);a(this).data("zupaAccordion",c)}})},a.zupaButtonMenu=function(b,c){var d={buttons:[{label:"",icon:"",onClick:null,menu:[{label:"",icon:"",onClick:null,menu:[]}]}],paddingHorizontal:10,bolder:!1,browsingMenus:!1,expandedButtonMenu:null,menuDelay:400},e=this;e.settings={};var f=a(b),g=a('<ul class="gui-button-menu-main"></ul>');e.init=function(){e.settings=a.extend(!0,{},d,c),f.addClass("gui-button-menu"),f.empty(),f.append(g),h(),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&h()}),g.on("click","li",function(){"function"==typeof e.settings.onClick&&e.settings.onClick()}),g.on("mousedown","li",function(){var b=a(this).index();e.settings.expandedButtonMenu==b?e.closeAllMenus(!0):null!=e.settings.buttons[b].contextMenu&&i(b,a(this))}),g.on("mouseover","li",function(){var b=a(this).index();e.settings.browsingMenus&&e.settings.expandedButtonMenu!=b&&(e.closeAllMenus(),null!=e.settings.buttons[b].contextMenu&&i(b,a(this)))}),a(document).on("mousedown","body",function(b){var c=a(b.target).closest(".gui-context-menu"),d=a(b.target).closest(".gui-context-menu-button");0==c.length&&null!=e.settings.expandedButtonMenu&&0==d.length})};var h=function(){g.empty();{var b=f.parent().height();f.parent().width()}f.outerHeight(b),g.outerHeight(b),a.each(e.settings.buttons,function(c,d){var f=a('<li class="gui-button-menu-button"><span class="button-label">'+d.label+"</span></li>");null!=d.icon&&f.prepend('<i class="'+d.icon+'"></i>'),null!=d.menu&&d.menu.length>0&&(d.contextMenu=ZupaContextMenu({menu:d.menu,trigger:"parent",parentSelector:".gui-button-menu-button"})),g.append(f),f.css("padding",e.settings.paddingHorizontal);var h=f.find(".button-label").outerHeight(),i=0;if(b>=60){f.addClass("button-bigger"),e.settings.bolder&&f.addClass("button-bolder");var j=null!=d.icon?f.find("i").outerHeight():0,k=null!=d.icon?f.find("i").outerWidth():0;i=h+j,k>0&&(f.find("i").after("<br />"),f.css("line-height",1))}else{var j=null!=d.icon?f.find("i").outerHeight():0;h>j?i=h:(i=j,f.find(".button-label").css("line-height",j+"px"))}var l=(b-i-2)/2;f.css({"padding-top":l,"padding-bottom":l})})},i=function(a,b){if(e.settings.expandedButtonMenu==a)return!1;null!=e.settings.expandedButtonMenu&&e.closeAllMenus(),e.settings.browsingMenus=!0,e.settings.expandedButtonMenu=a,b.addClass("expanded");var c=b.offset().top+b.outerHeight(),d=b.offset().left;e.settings.buttons[a].contextMenu.openMenu(d,c)};e.closeAllMenus=function(b){e.settings.expandedButtonMenu=null,b&&(e.settings.browsingMenus=!1),a.each(e.settings.buttons,function(a,b){null!=b.contextMenu&&b.contextMenu.closeMenu()}),g.find(".expanded").removeClass("expanded")},e.init()},a.fn.zupaButtonMenu=function(b){return this.each(function(){if(void 0==a(this).data("zupaButtonMenu")){var c=new a.zupaButtonMenu(this,b);a(this).data("zupaButtonMenu",c)}})},a.zupaContextMenu=function(b,c){var d={menu:[{label:"",icon:"",onClick:null,menu:[{label:"",icon:"",onClick:null,menu:[]}]}],trigger:"leftclick",parentSelector:null,browsingMenus:!1,expandedMenuIndex:null,menuDelay:400},e=this;e.settings={};var f=a(b),g=null;e.init=function(){d.menu=null,e.settings=a.extend(!0,{},d,c),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&e.closeAllMenus()}),"leftclick"==e.settings.trigger&&f.on("contextmenu",function(a){return e.openMenu(a.pageX,a.pageY),!1})},e.openMenu=function(b,c){g=a('<div class="gui-context-menu-container"></div>'),g.css({top:c,left:b});var d=h(e.settings.menu,1);a(document.body).append(g),d.fadeIn("fast"),a(document).one("mousedown","body",function(b){var c=a(b.target).closest(e.settings.parentSelector),d=a(b.target).closest(".gui-context-menu");0==c.length&&0==d.length&&e.closeMenu()})};var h=function(b,c){var d=a('<table class="gui-context-menu gui-context-menu-level-'+c+'"><tbody></tbody></table>').hide();return a.each(b,function(b,f){var g=a('<tr class="gui-context-menu-button"><td>'+f.label+"</td></tr>");if(null!=f.icon&&g.find("td").append('<i class="'+f.icon+'"></i>'),d.find("tbody").append(g),null!=f.menu&&f.menu.length>0){var k=h(f.menu,c+1);g.find("td").append('<span class="expand-indicator"></span>'),g.find("td").addClass("expand-arrow"),g.mouseover(function(){clearTimeout(this.hovertimer),this.hovertimer=setTimeout(function(){i(g,k)},e.settings.menuDelay)}),g.click(function(){clearTimeout(this.hovertimer),i(g,k)}),g.mouseleave(function(){clearTimeout(this.hovertimer)})}else g.click(function(){"function"==typeof f.onClick&&f.onClick(f,g),e.closeAllMenus(!0)});g.mouseenter(function(){g.siblings().removeClass("expanded"),j(k,c+1)})}),g.append(d),d},i=function(a,b){a.addClass("expanded");var c=5,d=a.closest("table").position().left+a.parent().outerWidth()+c,e=a.position().top+a.closest("table").position().top;b.css({left:d,top:e}),b.fadeIn("fast")},j=function(b,c){a.each(g.find(".gui-context-menu:visible"),function(d,e){if(a(e).is(b))return void a(e).find(".expanded").removeClass("expanded");var f=a(e).attr("class"),g=f.substring(f.indexOf("level-")+6);g>=c&&(a(e).fadeOut("fast"),a(e).find(".expanded").removeClass("expanded"))})};e.closeMenu=function(){e.settings.expandedButtonMenu=null,a(document.body).find(".gui-context-menu-container").remove()},e.init()},a.fn.zupaContextMenu=function(b){return this.each(function(){if(void 0==a(this).data("zupaContextMenu")){var c=new a.zupaContextMenu(this,b);a(this).data("zupaContextMenu",c)}})},ZupaContextMenu=function(b){return new a.zupaContextMenu(this,b)},a.zupaLoader=function(b,c){var d={},e=this;e.settings={};var f=a(b),g='<div class="gui-loader"><div class="loader-box"><div class="loader-progress"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div><div class="loader-message"></div></div></div>',h=a(g).hide(),i=h.find(".loader-box"),j=h.find(".loader-message");e.init=function(){e.settings=a.extend(!0,{},d,c),f.on("sizeHasChanged",function(a){a.target==f[0]&&(console.log("PARENT RESIZE"),k())}),k()},e.showLoader=function(a){e.setMessage(a),!f.find(".gui-loader").length>0&&f.append(h),h.show(),k()},e.hideLoader=function(){f.find(".gui-loader").remove()},e.setMessage=function(a){null==a?(j.text(""),j.hide()):(j.text(a),j.show())};var k=function(){var a=f.width(),b=f.height();h.width(a),h.height(b);var c=f.css("position");"absolute"!==c&&"relative"!==c&&h.css("position","relative");var d=i.outerWidth(),e=i.outerHeight();d>a||e>b?i.hide():i.show();var g=(a-d)/2,j=(b-e)/2;i.css({left:g,top:j})};e.init()},a.fn.zupaLoader=function(b){return this.each(function(){if(void 0==a(this).data("zupaLoader")){var c=new a.zupaLoader(this,b);a(this).data("zupaLoader",c)}})},a.zupaMainMenu=function(b,c){var d={buttons:[{label:"Elements",menu:[{label:"Products"},{label:"Services"},{label:"Sectors"},{label:"Projects"}]}]},e=this;e.settings={};var f=a(b),g=a('<ul class="gui-main-menu-buttons"></ul>');e.init=function(){e.settings=a.extend(!0,{},d,c),f.addClass("gui-main-menu"),f.append(g),h()};var h=function(){a.each(e.settings.buttons,function(b,c){var d=a("<li>"+c.label+"</li>");g.append(d),null!=c.menu&&i(d,c.menu),null!=c.link&&d.click(function(){window.location=c.link})})},i=function(b,c){var d=a('<ul class="gui-main-menu-submenu"><li class="gui-main-menu-arrow"></li></ul>').hide();a.each(c,function(a,b){d.append('<li class="gui-main-menu-submenu-button">'+b.label+"</li>")}),f.append(d),b.mouseenter(function(){d.show()}),b.mouseleave(function(b){0==a(b.relatedTarget).closest(".gui-main-menu-submenu").length&&d.hide()})};e.init()},a.fn.zupaMainMenu=function(b){return this.each(function(){if(void 0==a(this).data("zupaMainMenu")){var c=new a.zupaMainMenu(this,b);a(this).data("zupaMainMenu",c)}})},a.event.special.dblclick={setup:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("iphone")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0){var b=this,c=jQuery(b);c.bind("touchend.dblclick",jQuery.event.special.dblclick.handler)}else{var b=this,c=jQuery(b);c.bind("click.dblclick",jQuery.event.special.dblclick.handler)}},teardown:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("iphone")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0){var b=this,c=jQuery(b);c.unbind("touchend.dblclick")}else{var b=this,c=jQuery(b);c.unbind("click.dblclick",jQuery.event.special.dblclick.handler)}},handler:function(a){var b=a.target,c=jQuery(b),d=c.data("lastTouch")||0,e=(new Date).getTime(),f=e-d;f>20&&500>f?(c.data("lastTouch",0),c.trigger("dblclick")):c.data("lastTouch",e)}},a.zupaPane=function(b,c){var d={pane:{center:{parent:!1},east:{enabled:!1,resizable:!0,width:"25%",minWidth:0,parent:!1},west:{enabled:!1,resizable:!0,width:"25%",minWidth:0,parent:!1},north:{enabled:!1,resizable:!0,height:"25%",minHeight:0,parent:!1},south:{enabled:!1,resizable:!0,height:"25%",minHeight:0,parent:!1}},padding:8,spacing:8,offset:2},e=this;e.settings={};var f=a(b),g=f.find("> .pane-center").addClass("gui-pane"),h=f.find("> .pane-west").addClass("gui-pane"),i=f.find("> .pane-east").addClass("gui-pane"),j=f.find("> .pane-north").addClass("gui-pane"),k=f.find("> .pane-south").addClass("gui-pane");e.updateSettings=function(b){e.settings=a.extend(!0,{},e.settings,b),e.redraw()},e.init=function(){if(e.settings=a.extend(!0,{},d,c),f.addClass("gui-panes"),g.contents().wrapAll('<div class="pane-container"></div>'),h.contents().wrapAll('<div class="pane-container"></div>'),i.contents().wrapAll('<div class="pane-container"></div>'),j.contents().wrapAll('<div class="pane-container"></div>'),k.contents().wrapAll('<div class="pane-container"></div>'),e.settings.isNestedPane=!1,f.parent().hasClass("pane-container")&&(e.settings.isNestedPane=!0,f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&e.redraw()})),f.append(g),e.settings.pane.center.parent&&g.addClass("pane-parent"),e.settings.pane.west.enabled){f.append(h);var b=e.settings.offset/2;e.settings.pane.west.parent&&(h.addClass("pane-parent"),b=0),e.settings.pane.west.resizable&&(h.resizable({handles:"e",minWidth:0,ghost:!0,stop:m}),h.find("> .ui-resizable-e").css({width:e.settings.spacing,right:-(e.settings.spacing+b)}))}else h.hide();if(e.settings.pane.east.enabled){f.append(i);var b=e.settings.offset/2;e.settings.pane.east.parent&&(i.addClass("pane-parent"),b=0),e.settings.pane.east.resizable&&(i.resizable({handles:"w",minWidth:0,ghost:!0,stop:n}),i.find("> .ui-resizable-w").css({width:e.settings.spacing,left:-(e.settings.spacing+b)}))}else i.hide();e.settings.pane.north.enabled?(f.append(j),e.settings.pane.north.resizable&&(j.resizable({handles:"s",minHeight:0,ghost:!0,stop:p}),j.find("> .ui-resizable-s").css({height:e.settings.spacing,bottom:-(e.settings.spacing+1)})),e.settings.pane.north.parent&&j.addClass("pane-parent")):j.hide(),e.settings.pane.south.enabled?(f.append(k),e.settings.pane.south.resizable&&(k.resizable({handles:"n",minHeight:0,ghost:!0,stop:o}),k.find("> .ui-resizable-n").css({height:e.settings.spacing,top:-(e.settings.spacing+1)})),e.settings.pane.south.parent&&k.addClass("pane-parent")):k.hide(),a(window).resize(l),f.find(".ui-resizable-handler").off("dblclick"),f.find(".ui-resizable-e").on("dblclick",function(){0==e.settings.pane.west.realWidth?e.openWestPane():e.closeWestPane()}),f.find(".ui-resizable-w").on("dblclick",function(){0==e.settings.pane.east.realWidth?e.openEastPane():e.closeEastPane()}),f.find(".ui-resizable-n").on("dblclick",function(){0==e.settings.pane.south.realHeight?e.openSouthPane():e.closeSouthPane()}),f.find(".ui-resizable-s").on("dblclick",function(){0==e.settings.pane.north.realHeight?e.openNorthPane():e.closeNorthPane()}),e.redraw()};var l=function(b){a(b.target).hasClass("ui-resizable")||b.target!==this||e.redraw()},m=function(a,b){var c=q();e.settings.pane.west.realWidth=b.size.width>c?c:b.size.width<e.settings.pane.west.minWidth?e.settings.pane.west.minWidth:b.size.width,e.redraw()},n=function(a,b){var c=r();e.settings.pane.east.realWidth=b.size.width>c?c:b.size.width<e.settings.pane.east.minWidth?e.settings.pane.east.minWidth:b.size.width,e.redraw()},o=function(a,b){var c=s();e.settings.pane.south.realHeight=b.size.height>c?c:b.size.height<e.settings.pane.south.minHeight?e.settings.pane.south.minHeight:b.size.height,e.redraw()},p=function(a,b){var c=t();e.settings.pane.north.realHeight=b.size.height>c?c:b.size.height<e.settings.pane.north.minHeight?e.settings.pane.north.minHeight:b.size.height,e.redraw()},q=function(){var a=f.parent().width()-e.settings.spacing-2*e.settings.offset-2*e.settings.padding;return e.settings.pane.east.enabled&&(a-=e.settings.pane.east.realWidth+e.settings.spacing+e.settings.offset),a},r=function(){var a=f.parent().width()-e.settings.spacing-2*e.settings.offset-2*e.settings.padding;return e.settings.pane.west.enabled&&(a-=e.settings.pane.west.realWidth+e.settings.spacing+e.settings.offset),a},s=function(){var a=f.parent().height()-e.settings.spacing-2*e.settings.offset-2*e.settings.padding;return e.settings.pane.north.enabled&&(a-=e.settings.pane.north.realHeight+e.settings.spacing+e.settings.offset),e.settings.isNestedPane&&(a-=e.settings.offset),a},t=function(){var a=f.parent().height()-e.settings.spacing-2*e.settings.offset-2*e.settings.padding;return e.settings.pane.south.enabled&&(a-=e.settings.pane.south.realHeight+e.settings.spacing+e.settings.offset),e.settings.isNestedPane&&(a-=e.settings.offset),a};e.closeWestPane=function(){e.settings.pane.west.realWidth>e.settings.pane.west.minWidth&&(e.settings.pane.west.lastWidth=e.settings.pane.west.realWidth,h.animate({width:e.settings.pane.west.minWidth},{step:function(a){e.settings.pane.west.realWidth=Math.round(a),e.redraw()}},300,function(){e.settings.pane.west.realWidth=e.settings.pane.west.minWidth,e.redraw()}))},e.openWestPane=function(){var a=q(),b=e.settings.pane.west.lastWidth>a?a:e.settings.pane.west.lastWidth;h.animate({width:b},{step:function(a){e.settings.pane.west.realWidth=Math.round(a),e.redraw()}},300,function(){e.settings.pane.west.realWidth=b,e.redraw()})},e.closeEastPane=function(){e.settings.pane.east.realWidth>e.settings.pane.east.minWidth&&(e.settings.pane.east.lastWidth=e.settings.pane.east.realWidth,i.animate({width:e.settings.pane.east.minWidth},{step:function(a){e.settings.pane.east.realWidth=Math.round(a),e.redraw()}},300,function(){e.settings.pane.east.realWidth=e.settings.pane.east.minWidth,e.redraw()}))},e.openEastPane=function(){var a=r(),b=e.settings.pane.east.lastWidth>a?a:e.settings.pane.east.lastWidth;i.animate({width:b},{step:function(a){e.settings.pane.east.realWidth=Math.round(a),e.redraw()}},300,function(){e.settings.pane.east.realWidth=b,e.redraw()})},e.closeSouthPane=function(){e.settings.pane.south.realHeight>e.settings.pane.south.minHeight&&(e.settings.pane.south.lastHeight=e.settings.pane.south.realHeight,k.animate({height:e.settings.pane.south.minHeight},{step:function(a){e.settings.pane.south.realHeight=Math.round(a),e.redraw()}},300,function(){e.settings.pane.south.realHeight=e.settings.pane.south.minHeight,e.redraw()}))},e.openSouthPane=function(){var a=s(),b=e.settings.pane.south.lastHeight>a?a:e.settings.pane.south.lastHeight;k.animate({height:b},{step:function(a){e.settings.pane.south.realHeight=Math.round(a),e.redraw()}},300,function(){e.settings.pane.south.realHeight=b,e.redraw()})},e.closeNorthPane=function(){e.settings.pane.north.realHeight>e.settings.pane.north.minHeight&&(e.settings.pane.north.lastHeight=e.settings.pane.north.realHeight,j.animate({height:e.settings.pane.north.minHeight},{step:function(a){e.settings.pane.north.realHeight=Math.round(a),e.redraw()}},300,function(){e.settings.pane.north.realHeight=e.settings.pane.north.minHeight,e.redraw()}))},e.openNorthPane=function(){var a=t(),b=e.settings.pane.north.lastHeight>a?a:e.settings.pane.north.lastHeight;j.animate({height:b},{step:function(a){e.settings.pane.north.realHeight=Math.round(a),e.redraw()}},300,function(){e.settings.pane.north.realHeight=b,e.redraw()})},e.redraw=function(){var a=e.settings.padding,b=e.settings.spacing,c=e.settings.offset,d=f.parent().height(),l=f.parent().width(),m=d-2*a,n=l-2*a;null==e.settings.pane.west.realWidth&&(e.settings.pane.west.realWidth="string"==typeof e.settings.pane.west.width?parseInt(e.settings.pane.west.width)*(n-b-c)/100:e.settings.pane.west.width),null==e.settings.pane.east.realWidth&&(e.settings.pane.east.realWidth="string"==typeof e.settings.pane.east.width?parseInt(e.settings.pane.east.width)*(n-b-c)/100:e.settings.pane.east.width),null==e.settings.pane.north.realHeight&&(e.settings.pane.north.realHeight="string"==typeof e.settings.pane.north.height?parseInt(e.settings.pane.north.height)*(m-b-c)/100:e.settings.pane.north.height),null==e.settings.pane.south.realHeight&&(e.settings.pane.south.realHeight="string"==typeof e.settings.pane.south.height?parseInt(e.settings.pane.south.height)*(m-b-c)/100:e.settings.pane.south.height);var o=l-2*a,p=d-2*a,u=a,v=a;if(e.settings.pane.west.enabled){var w=q();0>w?e.settings.pane.west.realWidth=0:w<e.settings.pane.west.realWidth&&(e.settings.pane.west.realWidth=w),o=o-b-e.settings.pane.west.realWidth-e.settings.offset,v+=e.settings.pane.west.realWidth+e.settings.offset+b,0==e.settings.pane.west.realWidth?h.addClass("pane-closed"):h.removeClass("pane-closed"),h.width(e.settings.pane.west.parent?e.settings.pane.west.realWidth+c:e.settings.pane.west.realWidth),h.height(e.settings.isNestedPane?m-c:m),h.css({top:a,left:a}),h.find(".pane-container").trigger("sizeHasChanged")}if(e.settings.pane.east.enabled){var x=r();0>x?e.settings.pane.east.realWidth=0:x<e.settings.pane.east.realWidth&&(e.settings.pane.east.realWidth=x),o=o-e.settings.pane.east.realWidth-e.settings.offset-b,0==e.settings.pane.east.realWidth?i.addClass("pane-closed"):i.removeClass("pane-closed"),i.width(e.settings.pane.east.parent?e.settings.pane.east.realWidth+c:e.settings.pane.east.realWidth),i.height(e.settings.isNestedPane?m-c:m),i.css({top:a,left:v+o+b}),i.find(".pane-container").trigger("sizeHasChanged")}if(e.settings.pane.north.enabled){var y=t();0>y?e.settings.pane.north.realHeight=0:y<e.settings.pane.north.realHeight&&(e.settings.pane.north.realHeight=y),p=p-e.settings.pane.north.realHeight-e.settings.offset-b,u+=e.settings.pane.north.realHeight+b+e.settings.offset,0==e.settings.pane.north.realHeight?j.addClass("pane-closed"):j.removeClass("pane-closed"),e.settings.pane.north.parent?(j.height(e.settings.pane.north.realHeight+c),j.width(o)):(j.height(e.settings.pane.north.realHeight),j.width(o-c)),j.css({top:a,left:v}),j.find(".pane-container").trigger("sizeHasChanged")}if(e.settings.pane.south.enabled){var z=s();0>z?e.settings.pane.south.realHeight=0:z<e.settings.pane.south.realHeight&&(e.settings.pane.south.realHeight=z),p=p-e.settings.pane.south.realHeight-e.settings.offset-b,0==e.settings.pane.south.realHeight?k.addClass("pane-closed"):k.removeClass("pane-closed"),e.settings.pane.south.parent?(k.width(o),k.height(e.settings.pane.south.realHeight+c)):(k.width(o-c),k.height(e.settings.pane.south.realHeight)),k.css({top:d-e.settings.pane.south.realHeight-a-c,left:v}),k.find(".pane-container").trigger("sizeHasChanged")}(p!=g.height()||o!=g.width())&&(e.settings.pane.center.parent&&(o+=c,p+=c),g.width(o-c),g.height(p-c),g.css({top:u,left:v}),g.find(".pane-container").trigger("sizeHasChanged"))},e.init()},a.fn.zupaPane=function(b){return this.each(function(){if(void 0==a(this).data("zupaPane")||""==a(this).data("zupaPane")){var c=new a.zupaPane(this,b);a(this).data("zupaPane",c)}})},a.zupaPlaceholder=function(b,c){var d={message:"PLACEHOLDER"},e=this;e.settings={};var f=a(b),g=null;e.init=function(){e.settings=a.extend(!0,{},d,c),f.addClass("gui-placeholder"),f.append('<div class="gui-placeholder-inner"></div>'),g=f.find(".gui-placeholder-inner"),null!=e.settings.message&&g.text(e.settings.message),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&h()}),h()};var h=function(){var a=f.parent().height(),b=f.parent().width();g.width(b-22),g.height(a-22),g.css("line-height",a-22+"px")};e.init()},a.fn.zupaPlaceholder=function(b){return this.each(function(){if(void 0==a(this).data("zupaPlaceholder")){var c=new a.zupaPlaceholder(this,b);a(this).data("zupaPlaceholder",c)}})},a.zupaTable=function(b,c){var d={url:null,pathEntries:"list",pathTotal:"total",columns:null,label:"Records",start:0,count:10,selectable:!0,sortColumn:0,sortDirection:"asc",onRowClick:null,onRowDoubleClick:null,path:{entries:"list",total:"total",page:"page",pages:"pages",count:"count",start:"start"},language:{loading:"Loading",sortAscending:"Sort Ascending",sortDescending:"Sort Descending"}},e=this;e.settings={},e.settings=a.extend(!0,{},d,c);var f=a(b),g=a('<div class="gui-table-header"></div>').hide(),h=a('<div class="gui-table-content"><div class="column-marker"></div><table><tbody></tbody></table></div>').hide(),i=a('<div class="gui-table-footer"><div class="message-box"></div></div>').hide(),j=i.find(".message-box"),k=h.find(".column-marker"),l=a('<div class="column-menu"><div class="column-menu-arrow"></div><div class="column-sort-asc gui-btn btn-fill"><i class="icon arrow-up"></i>'+e.settings.language.sortAscending+'</div><div class="column-sort-desc gui-btn btn-fill"><i class="icon arrow-down"></i>'+e.settings.language.sortDescending+"</div></div>").hide();e.init=function(){f.empty(),f.addClass("gui-table"),f.append(g),f.append(h),f.append(i),f.append(l),f.zupaLoader(),e.loader=f.data("zupaLoader"),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&m()}),h.mCustomScrollbar({theme:"light-thick",contentTouchScroll:!0,mouseWheelPixels:"auto",scrollButtons:{enable:!0},callbacks:{onTotalScroll:function(){e.loadingInProgress||e.loadPage()},onTotalScrollOffset:200,onOverflowY:function(){e.drawSize()}}}),"function"==typeof e.settings.onRowClick&&h.on("click","table tr",function(){e.settings.onRowClick(a(this).data())}),g.on("click",".column-menu-button",function(){n(a(this))}),l.on("click",".column-sort-asc",function(){e.sortColumnAscending(e.settings.selectedColumn)}),l.on("click",".column-sort-desc",function(){e.sortColumnDescending(e.settings.selectedColumn)}),e.loadPage()};var m=function(){e.settings.start>0?e.drawSize():e.loadingInProgress||e.loadPage()},n=function(a){if(a.hasClass("selected"))return o(),!1;e.settings.selectedColumn=a.parent().index();var b=null;a.parent().is(":last-child")&&!a.parent().is(":first-child")?(l.addClass("menu-reversed"),b=a.offset().left-l.outerWidth()+9):(l.removeClass("menu-reversed"),b=a.offset().left-10),f.find(".column-menu-button").removeClass("selected"),a.addClass("selected"),l.css("left",b),l.show()},o=function(){null==e.settings.selectedColumn,f.find(".column-menu-button").removeClass("selected"),l.hide()};e.loadPage=function(){e.loader.showLoader(e.settings.language.loading+" "+e.settings.label),e.loadingInProgress=!0,e.setMessage(e.settings.language.loading);var b=f.parent().height();100>b&&(b=a(window).height()),e.settings.count=Math.round(b/26*2);for(var c="",d="",g=0;g<e.settings.columns.length;g++)c+=e.settings.columns[g].col+";",e.settings.columns[g].searchable&&(d+=e.settings.columns[g].col+";");var h={};h[e.settings.path.start]=e.settings.start,h[e.settings.path.count]=e.settings.count,null!=e.settings.path.sortcol&&null!=e.settings.sortColumn&&(h[e.settings.path.sortcol]=e.settings.columns[e.settings.sortColumn].col,h[e.settings.path.sortdir]=e.settings.sortDirection);var i={url:e.settings.url,type:"GET",dataType:"json",async:!0,data:h};null!=e.settings.jsonp&&""!=e.settings.jsonp&&(i.dataType="jsonp",i.jsonp=e.settings.jsonp),a.ajax(i).then(p,q)};var p=function(a){e.loader.hideLoader(),e.settings.start+=e.settings.count,e.drawData(a)},q=function(){e.loader.hideLoader(),e.loadingInProgress=!1,console.log("FAILURE")};e.sortColumnAscending=function(a){o(),e.settings.sortColumn=a,e.settings.sortDirection="asc",e.resetTable(),e.loadPage()},e.sortColumnDescending=function(a){o(),e.settings.sortColumn=a,e.settings.sortDirection="desc",e.resetTable(),e.loadPage()},e.drawData=function(b){g.empty().append('<div class="holder"></div>');for(var c=0;c<e.settings.columns.length;c++){var d=a('<div class="column"><div class="inner">'+e.settings.columns[c].name+"</div></div>");e.settings.columns[c].sortable&&d.append('<div class="column-menu-button"></div>'),e.settings.sortColumn==c&&d.addClass("asc"==e.settings.sortDirection?"column-sort-asc":"column-sort-desc"),g.find(".holder").append(d)}g.find(".column").each(function(b,c){null!=e.settings.columns[b]&&e.settings.columns[b].resizable&&(a(c).append('<div class="resize-handle"></div>'),a(c).find(".resize-handle").draggable({axis:"x",drag:function(){var b=parseInt(a(this).css("left"))+parseInt(a(this).parent().css("left"));k.css("left",b),k.show()},stop:function(){k.hide();var b=a(this).parent().index(),c=a(this).css("left");e.settings.columns[b].width=c+"px",a(this).removeAttr("style"),e.drawSize()}}))}),a.each(b[e.settings.path.entries],function(b,c){var d=a("<tr>");a.each(e.settings.columns,function(b,e){a.each(c,function(b,f){if(b==e.col){var g=a('<td><div class="inner"></div></td>');g.find(".inner").append(null!=e.parse&&"function"==typeof e.parse?e.parse(c):f),d.append(g)}})}),d.data(c),h.find("table").append(d)}),e.setMessage("<b>"+b[e.settings.path.total]+"</b> "+e.settings.label),e.drawSize()},e.drawSize=function(){var b=f.parent().width(),c=f.parent().height();if(150>c)return g.hide(),i.hide(),h.hide(),!1;g.show(),i.show(),h.show(),e.hasLoadedInital||(g.show(),h.show(),i.show(),e.hasLoadedInital=!0),f.width(b),f.height(c),g.width(b),50>c?g.hide():g.show(),i.width(b),150>c?i.hide():i.show(),h.width(b),h.height(c-g.height()-i.height()),a.each(e.settings.columns,function(a,c){if(null!=c.width){var d=null,e=c.width.indexOf("px"),f=c.width.indexOf("%");e>=0?d=parseInt(c.width.substring(0,e)):f>=0&&(d=Math.floor(parseInt(c.width.substring(0,f))/100*b)),null!=d&&h.find("table tr:first td:nth-child("+(a+1)+")").width(d)}});var d=0;h.find("table tr:first td").each(function(b,c){var e=a(c).width(),f=a(c).outerWidth();g.find(".holder .column:nth-child("+(b+1)+")").width(e).css("left",d+"px"),d+=f}),e.loadingInProgress=!1,f.trigger("sizeHasChanged")},e.resetTable=function(){e.settings.start=0,h.find("table tbody").empty()},e.setMessage=function(a){j.html(a)},e.init()},a.fn.zupaTable=function(b){return this.each(function(){if(void 0==a(this).data("zupaTable")){var c=new a.zupaTable(this,b);a(this).data("zupaTable",c)}})},a.zupaTabs=function(b,c){var d={active:0},e=this;e.settings={};var f=a(b),g=null,h=null,i=null,j=null,k=null;e.init=function(){e.settings=a.extend(!0,{},d,c),f.addClass("gui-tabs"),f.wrapInner('<div class="tab-container"></div>'),f.prepend('<div class="tab-pane"></div>'),f.prepend('<ul class="tab-pane-expand-menu"><div class="top-border"></div></ul>'),g=f.find(".tab-pane"),g.append('<div class="tab-pane-expand"></div>'),g.append('<div class="tab-pane-container"></div>'),i=g.find(".tab-pane-expand").hide(),j=f.find(".tab-pane-expand-menu").hide(),h=g.find(".tab-pane-container"),k=f.find(".tab-container"),l(),n(),e.selectTab(e.settings.active),i.click(function(){j.toggle(),i.toggleClass("selected")}),g.on("click",".gui-tab",function(b){a(b.target).is(".tab-close-btn")||(e.selectTab(a(this).index()),q())}),j.on("click","li",function(b){if(!a(b.target).is(".tab-close-btn")){var c=a(this).attr("id").split("-")[1];e.selectTab(c)}}),f.on("click",".tab-close-btn",function(){var b=a(this).parent().attr("id").split("-")[1];e.removeTab(b)}),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&(n(),l())})};var l=function(){return h.empty(),j.find("li").remove(),null==e.settings.tabs?!1:(a.each(e.settings.tabs,function(a,b){o(a,b.label,b.content,b.closeable);var c=null;b.scrollVertical&&(c="y"),b.scrollHorizontal&&(c+="x"),null!=c&&k.find(b.content).mCustomScrollbar({theme:"light-thick",axis:c,setTop:0,contentTouchScroll:!0,mouseWheelPixels:"auto",scrollButtons:{enable:!0}})}),m(),void e.selectTab(e.settings.active))},m=function(){var b=g.width()-10,c=0;e.expandedTabs=!1,h.find(".gui-tab").each(function(d,f){c+=a(f).outerWidth(),c>b&&(a(this).remove(),p(d,e.settings.tabs[d].label,e.settings.tabs[d].content,e.settings.tabs[d].closeable),e.expandedTabs=!0)}),e.expandedTabs?i.show():(i.hide(),j.hide())},n=function(){var a=f.parent().height();k.height(a-34),k.trigger("sizeHasChanged")},o=function(b,c,d,e){var f=a('<div id="tab-'+b+'" class="gui-tab" rel="'+d+'"><div class="tab-left"></div><div class="tab-center">'+c+'</div><div class="tab-right"></div></div>');e&&f.prepend('<div class="tab-close-btn"></div>'),h.append(f)},p=function(b,c,d,e){var f=a('<li id="tab-'+b+'" rel="'+d+'">'+c+"</li>");e&&(f.append('<div class="tab-close-btn"></div>'),f.addClass("tab-closeable")),j.append(f)},q=function(){j.hide(),i.removeClass("selected")};e.addTab=function(a){null==e.settings.tabs&&(e.settings.tabs=[]),e.settings.tabs.push({label:a.label,content:a.content,closeable:a.closeable});var b=e.settings.tabs.length-1;e.expandedTabs?p(b,a.label,a.content,a.closeable):(o(b,a.label,a.content,a.closeable),m()),e.selectTab(b)},e.addTabContent=function(a,b,c){k.append(a);var d=null;b&&(d="y"),c&&(d+="x"),null!=d&&a.mCustomScrollbar({theme:"light-thick",axis:d,setTop:0,contentTouchScroll:!0,mouseWheelPixels:"auto",scrollButtons:{enable:!0}})},e.selectTab=function(a){e.settings.active=a,e.deselectAll();var b=!1,c=h.find("#tab-"+a);c.length||(b=!0,c=j.find("#tab-"+a)),b||(a>0&&h.find("#tab-"+(a-1)).addClass("tab-toleft"),c.is(":last-child")||h.find("#tab-"+(a+1)).addClass("tab-toright")),c.addClass("active");var d=c.attr("rel"),f=k.find(d);f.show(),f.mCustomScrollbar("update"),k.trigger("sizeHasChanged"),f.trigger("sizeHasChanged")},e.removeTab=function(a){var b=f.find("#tab-"+a),c=b.attr("rel");(e.settings.tabs[a].scrollVertical||e.settings.tabs[a].scrollHorizontal)&&k.find(c).mCustomScrollbar("destroy"),k.find(c).remove(),e.settings.tabs.splice(a,1);var d=e.settings.tabs.length;e.settings.active==a?d>a?e.settings.active=a:a>0&&(e.settings.active=a-1):a<e.settings.active&&(e.settings.active=e.settings.active-1),l()},e.deselectAll=function(){j.find(".active").removeClass("active"),h.find(".active").removeClass("active"),h.find(".tab-toleft").removeClass("tab-toleft"),h.find(".tab-toright").removeClass("tab-toright"),f.find(".tab-container").find("> div").hide()},e.numberOfTabs=function(){return e.settings.tabs.length},e.init()},a.fn.zupaTabs=function(b){return this.each(function(){if(void 0==a(this).data("zupaTabs")){var c=new a.zupaTabs(this,b);
a(this).data("zupaTabs",c)}})},a.zupaThumb=function(b,c){var d={url:null,title:"Picture title",size:120},e=this;e.settings={};var f=a(b),g='<div class="thumb-image"></div><div class="thumb-menu"></div>';e.init=function(){e.settings=a.extend(!0,{},d,c),null==b?f=a('<div class="gui-thumb">'+g+"</div>"):(f.addClass("gui-thumb"),f.append(g)),e.$image=f.find(".thumb-image"),e.$menu=f.find(".thumb-menu"),e.$image.width(e.settings.size),e.$image.height(e.settings.size),e.loadImage()},e.loadImage=function(){a('<img src="'+e.settings.url+'">').load(function(){a(this).appendTo(e.$image),a(this).css("max-width",e.settings.size);var b=a(this).width(),c=a(this).height(),d=(e.settings.size-b)/2,f=(e.settings.size-c)/2;d>1&&a(this).css("margin-left",d),f>1&&a(this).css("margin-top",f)})},e.addTo=function(a){a.append(f)},e.init()},a.fn.zupaThumb=function(b){return this.each(function(){if(void 0==a(this).data("zupaThumb")){var c=new a.zupaThumb(this,b);a(this).data("zupaThumb",c)}})},a.zupaWindow=function(b,c){var d={title:"",icon:null,content:null,width:700,height:500,xpos:100,ypos:100,overlay:!1,maximized:!1,minimized:!1,maximizable:!0,minimizable:!0,closable:!0,draggable:!0,resizable:!0,centered:!1,onClose:null},e=this;e.settings={};var f=a(b),g=null;init=function(){e.settings=a.extend(!0,{},d,c),f=a('<div class="gui-window"><div class="titlebuttons"></div><div class="titlebar"><div class="title">'+e.settings.title+'</div></div><div class="frame"></div></div>').hide(),f.width(e.settings.width),f.height(e.settings.height),f.css("left",e.settings.xpos),f.css("top",e.settings.ypos),$titlebar=f.find(".titlebar"),g=f.find(".frame"),a(document.body).append(f),null!=e.settings.icon&&(f.find(".titlebar").prepend('<i class="icon"></i>'),f.find(".titlebar .icon").css("background-image","url("+e.settings.icon+")")),e.settings.overlay&&(f.before('<div class="gui-overlay">'),f.after("</div>")),e.settings.centered&&e.center(),e.settings.maximized&&e.maximize(),e.settings.resizable&&f.resizable({minWidth:200,helper:"gui-window-helper",start:function(){a(".gui-window-helper").css("z-index",parseInt(a(this).css("z-index"))+1),a(document).find("iframe").each(function(){a('<div class="ui-resizable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-resizable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.settings.width=f.find(".frame").width(),e.settings.height=f.find(".frame").height()}}),e.settings.draggable&&f.draggable({handle:".titlebar",cursor:"move",stack:".gui-window",iframeFix:!0,start:function(){f.css("opacity","0.8")},stop:function(){f.css("opacity","1"),e.settings.xpos=f.position().left,e.settings.ypos=f.position().top}}),$titlebar.dblclick(function(){f.hasClass("maximized")?e.unmaximize():e.maximize()}),f.mousedown(function(){e.bringToFront()}),e.settings.closable&&(f.find(".titlebuttons").append('<div class="close-btn"></div>'),f.find(".titlebuttons .close-btn").click(function(){e.close()})),e.settings.maximizable&&(f.find(".titlebuttons").append('<div class="maximize-btn"></div>'),f.find(".titlebuttons .maximize-btn").click(function(){f.hasClass("maximized")?e.unmaximize():e.maximize()})),e.settings.minimizable&&(f.find(".titlebuttons").append('<div class="minimize-btn"></div>'),f.find(".titlebuttons .minimize-btn").click(function(){e.minimize()})),a(window).resize(function(a){a.target==window&&e.update()}),f.parent().on("sizeHasChanged",function(a){a.target==f.parent()[0]&&e.update()}),null!=e.settings.content&&e.loadContent(e.settings.content)},e.loadContent=function(a){g.empty(),g.append('<iframe scrolling="no" src="'+a+'"></iframe>')},e.reloadContent=function(){g.empty(),g.append('<iframe scrolling="no" src="'+e.settings.content+'"></iframe>')},e.setIcon=function(a){e.settings.icon=a,f.find(".titlebar .icon").css("background-image","url("+e.settings.icon+")")},e.update=function(){f.hasClass("maximized")?(f.outerWidth(a(window).width()),f.outerHeight(a(window).height())):e.settings.centered&&e.center()},e.center=function(){e.settings.xpos=(a(window).width()-f.outerWidth())/2,e.settings.ypos=(a(window).height()-f.outerHeight())/2,f.css("left",e.settings.xpos),f.css("top",e.settings.ypos)},e.close=function(){e.settings.state=0,f.fadeOut(100,function(){a(this).remove()}),"function"==typeof e.settings.onClose&&e.settings.onClose()},e.open=function(){e.bringToFront(),f.fadeIn(100)},e.maximize=function(){if(!f.hasClass("maximized")){f.css("left",0),f.css("top",0);var b=a(window).width(),c=a(window).height();f.outerWidth(b),f.outerHeight(c),f.addClass("maximized"),e.resizable(!1),g.trigger("sizeHasChanged")}},e.unmaximize=function(){f.hasClass("maximized")&&(f.css("width",e.settings.width),f.css("height",e.settings.height),f.css("left",e.settings.xpos),f.css("top",e.settings.ypos),f.removeClass("maximized"),e.resizable(!0),g.trigger("sizeHasChanged"))},e.minimize=function(){f.animate({top:"+=100",opacity:0},200,function(){f.hide(),e.settings.minimized=!0})},e.unminimize=function(){f.show(),f.animate({top:"-=100",opacity:1},200,function(){e.settings.minimized=!1})},e.resizable=function(a){e.settings.resizable&&f.resizable("option","disabled",!a)},e.bringToFront=function(){var b=-999;a("*").each(function(){var c=parseInt(a(this).css("z-index"),10);c&&c>b&&(b=c)}),f.css("z-index",b+1)},init()},a.fn.zupaWindow=function(b){return this.each(function(){if(void 0==a(this).data("zupaWindow")){var c=new a.zupaWindow(this,b);a(this).data("zupaWindow",c)}})},ZupaWindow=function(b){return new a.zupaWindow(this,b)}}(jQuery);